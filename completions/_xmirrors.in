#autoload

local -a mirror_lst
local line region url location rest
local -i tier

for line in ${(f)"$(<@@PREFIX@@/share/xmirror/mirrors.lst)"}; do
	[[ $line = '#'* ]] && continue
	while IFS=$'\t' read -r region url location tier rest; do
		mirror_lst+=("${url//:/\\:}:$location, Tier $tier")
	done <<< $line
done

_describe -t mirrors "available mirrors" mirror_lst "$@" -o nosort
